generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  
}

model User {
  id                  String     @id @default(cuid())
  login               String?     @unique                         // “найти уникальную запись”
  passwordHash        String?
  username            String?    @unique                         // “найти уникальную запись” @ => для одного поля
  avatar              String? 
  createdAt           DateTime   @default(now())
  updatedAt           DateTime   @updatedAt
  accounts            Account[]                                  // “привязки к провайдерам”. виртуальное поле на уровне ORM
}

model Account {
  id                  String     @id @default(cuid())
  provider            String                                    // Кто выдал аккаунт ("google", "github", "facebook")
  providerAccountId   String                                    // ID пользователя у провайдера
  userId              String                                    // внешний ключ (foreign key), ссылка на User.id
  user                User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  @@unique([provider, providerAccountId])                       // @@unique защищает от дубликатов У одного провайдера один accountId может существовать только один раз
  @@index([userId])                                             // @@index ускоряет работу, @@ => для всей модели
}